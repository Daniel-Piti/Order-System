spring:
  application:
    name: order-system

  config:
    import: file:config.yml

  # File upload limits (matches S3StorageService.MAX_FILE_SIZE_MB)
  servlet:
    multipart:
      max-file-size: 5MB      # Maximum file size per request
      max-request-size: 30MB   # Maximum request size (file + other data)
      enabled: true

  jpa:
    hibernate:
      ddl-auto: none

  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration

springdoc:
  swagger-ui:
    doc-expansion: none

# CORS configuration
# Default: Allows production and localhost (for local development)
# In production (ECS): Set CORS_ALLOWED_ORIGINS environment variable to override
cors:
  allowed-origins:
    - https://order-it-app.com
    - http://localhost:*
    - http://127.0.0.1:*

# Server configuration
# Default: HTTP on port 8080 (for local development)
# Set ENABLE_HTTPS=true and SERVER_PORT=443 in ECS to enable HTTPS (requires NET_BIND_SERVICE capability)
server:
  port: ${SERVER_PORT:8080}
  ssl:
    enabled: ${ENABLE_HTTPS:false}
    key-store: classpath:keystore.p12
    key-store-password: ${SSL_KEYSTORE_PASSWORD}
    key-store-type: PKCS12
    key-alias: ordersystem
