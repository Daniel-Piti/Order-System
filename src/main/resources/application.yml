spring:
  application:
    name: order-system

  config:
    import: file:config.yml

  # File upload limits (matches S3StorageService.MAX_FILE_SIZE_MB)
  servlet:
    multipart:
      max-file-size: 5MB      # Maximum file size per request
      max-request-size: 30MB   # Maximum request size (file + other data)
      enabled: true

  jpa:
    hibernate:
      ddl-auto: none

  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration

springdoc:
  swagger-ui:
    doc-expansion: none

# Server configuration
# Default: HTTP on port 8080 (for local development)
# Set ENABLE_HTTPS=true and SERVER_PORT=8443 in ECS to enable HTTPS (8443 is used instead of 443 due to non-root user)
server:
  port: ${SERVER_PORT:8080}
  ssl:
    enabled: ${ENABLE_HTTPS:false}
    key-store: classpath:keystore.p12
    key-store-password: ${SSL_KEYSTORE_PASSWORD}
    key-store-type: PKCS12
    key-alias: ordersystem
